{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Eng_hack\\\\Desktop\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\Eng_hack\\\\Desktop\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import InfoBar from\"../Infobar/Infobar.js\";import io from'socket.io-client';import queryString from\"query-string\";import Input from\"../Input/Input.js\";import Messages from\"../Messages/Messages.js\";import'./Chat.css';var ENDPOINT=\"https://reactchatrooms.herokuapp.com/\";var socket;var Chat=function Chat(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),messages=_useState6[0],setMessages=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];useEffect(function(){var _queryString$parse=queryString.parse(window.location.search),name=_queryString$parse.name,room=_queryString$parse.room;socket=io(ENDPOINT);setRoom(room);setName(name);socket.emit(\"join\",{name:name,room:room},function(error){if(error){alert(error);}});return function(){socket.emit(\"disconnect\");socket.off();};},[ENDPOINT,window.location.search]);useEffect(function(){socket.on('message',function(message){setMessages([].concat(_toConsumableArray(messages),[message]));});},[messages]);var sendMessage=function sendMessage(event){event.preventDefault();if(message){socket.emit('sendMessage',message,function(){return setMessage('');});}};console.log(message,messages);return/*#__PURE__*/React.createElement(\"div\",{className:\"outerContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(InfoBar,{room:room}),/*#__PURE__*/React.createElement(Messages,{messages:messages,name:name}),/*#__PURE__*/React.createElement(Input,{message:message,setMessage:setMessage,sendMessage:sendMessage})));};export default Chat;","map":{"version":3,"sources":["C:/Users/Eng_hack/Desktop/client/src/component/Chat/Chat.js"],"names":["React","useState","useEffect","InfoBar","io","queryString","Input","Messages","ENDPOINT","socket","Chat","props","name","setName","room","setRoom","messages","setMessages","message","setMessage","parse","window","location","search","emit","error","alert","off","on","sendMessage","event","preventDefault","console","log"],"mappings":"4PAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAO,YAAP,CACA,GAAMC,CAAAA,QAAQ,CAAI,uCAAlB,CACA,GAAIC,CAAAA,MAAJ,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,KAAD,CAAW,eACEV,QAAQ,CAAC,EAAD,CADV,wCACfW,IADe,eACTC,OADS,8BAEEZ,QAAQ,CAAC,EAAD,CAFV,yCAEfa,IAFe,eAETC,OAFS,8BAGUd,QAAQ,CAAC,EAAD,CAHlB,yCAGfe,QAHe,eAGLC,WAHK,8BAIQhB,QAAQ,CAAC,EAAD,CAJhB,yCAIfiB,OAJe,eAINC,UAJM,eAQtBjB,SAAS,CAAC,UAAM,wBAESG,WAAW,CAACe,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,CAFT,CAENX,IAFM,oBAENA,IAFM,CAEAE,IAFA,oBAEAA,IAFA,CAIdL,MAAM,CAAGL,EAAE,CAACI,QAAD,CAAX,CAEAO,OAAO,CAACD,IAAD,CAAP,CACAD,OAAO,CAACD,IAAD,CAAP,CAEAH,MAAM,CAACe,IAAP,CAAY,MAAZ,CAAqB,CAACZ,IAAI,CAAJA,IAAD,CAAQE,IAAI,CAAJA,IAAR,CAArB,CAAoC,SAACW,KAAD,CAAW,CAC5C,GAAIA,KAAJ,CAAW,CACTC,KAAK,CAACD,KAAD,CAAL,CACD,CACH,CAJD,EAKF,MAAO,WAAK,CAAEhB,MAAM,CAACe,IAAP,CAAY,YAAZ,EACbf,MAAM,CAACkB,GAAP,GAAc,CADf,CAGC,CAjBQ,CAiBN,CAACnB,QAAD,CAAWa,MAAM,CAACC,QAAP,CAAgBC,MAA3B,CAjBM,CAAT,CAmBArB,SAAS,CAAC,UAAM,CACdO,MAAM,CAACmB,EAAP,CAAU,SAAV,CAAsB,SAACV,OAAD,CAAY,CACjCD,WAAW,8BAAKD,QAAL,GAAcE,OAAd,GAAX,CACA,CAFD,EAEG,CAHI,CAGF,CAACF,QAAD,CAHE,CAAT,CASA,GAAMa,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC7BA,KAAK,CAACC,cAAN,GAEA,GAAGb,OAAH,CAAY,CACVT,MAAM,CAACe,IAAP,CAAY,aAAZ,CAA2BN,OAA3B,CAAoC,iBAAMC,CAAAA,UAAU,CAAC,EAAD,CAAhB,EAApC,EACD,CACF,CAND,CAQFa,OAAO,CAACC,GAAR,CAAYf,OAAZ,CAAoBF,QAApB,EAEE,mBACE,2BAAK,SAAS,CAAC,gBAAf,eACA,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,OAAD,EAAS,IAAI,CAAEF,IAAf,EADJ,cAEI,oBAAC,QAAD,EAAU,QAAQ,CAAEE,QAApB,CAA8B,IAAI,CAAEJ,IAApC,EAFJ,cAGI,oBAAC,KAAD,EAAO,OAAO,CAAEM,OAAhB,CAAyB,UAAU,CAAEC,UAArC,CAAiD,WAAW,CAAEU,WAA9D,EAHJ,CADA,CADF,CASA,CAvDF,CAwDA,cAAenB,CAAAA,IAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport InfoBar from \"../Infobar/Infobar.js\"\r\nimport io from 'socket.io-client';\r\nimport queryString from \"query-string\";\r\nimport Input from \"../Input/Input.js\"\r\nimport Messages from \"../Messages/Messages.js\"\r\nimport './Chat.css';\r\nconst ENDPOINT  = \"https://reactchatrooms.herokuapp.com/\";\r\nlet socket;\r\n\r\nconst Chat = (props) => {\r\n  const [name, setName] = useState('');\r\n  const [room, setRoom] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    \r\n    const { name, room } = queryString.parse(window.location.search);\r\n\r\n    socket = io(ENDPOINT);\r\n\r\n    setRoom(room);\r\n    setName(name)\r\n\r\n    socket.emit(\"join\" , {name , room}, (error) => {\r\n       if (error) {\r\n         alert(error)\r\n       }\r\n    })\r\n  return () =>{ socket.emit(\"disconnect\");\r\n   socket.off();}\r\n    \r\n  }, [ENDPOINT, window.location.search]);\r\n  \r\n  useEffect(() => {\r\n    socket.on('message' , (message) =>{\r\n     setMessages([...messages,message])\r\n    })} ,[messages]\r\n\r\n  \r\n  )\r\n\r\n\r\n  const sendMessage = (event) => {\r\n    event.preventDefault();\r\n\r\n    if(message) {\r\n      socket.emit('sendMessage', message, () => setMessage(''));\r\n    }\r\n  }\r\n\r\nconsole.log(message,messages);\r\n\r\n  return (\r\n    <div className=\"outerContainer\">\r\n    <div className=\"container\">\r\n        <InfoBar room={room} />\r\n        <Messages messages={messages} name={name} />\r\n        <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n    </div>\r\n  </div>\r\n\r\n)}\r\nexport default Chat;"]},"metadata":{},"sourceType":"module"}